<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otoscopy Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="menu">
        <div class="menu-content">
            <img src="img/logo.png" class="logo">
            <h1>Otoscopy Game</h1>
            <button id="start-button">Start</button>
            <button id="info-button">Info</button>
            <button id="dx-button">Dx</button>
            <button id="toggle-minimalist">Minimalist</button>
            <label class="switch">
              <input type="checkbox" id="toggle-fellow">
              <span class="slider round"></span>
            </label>
            <span id="fellow-mode-text">GPEP Mode Enabled</span>
        </div>
    </div>

    <div id="info-screen" class="info-screen" style="display: none;">
        <div class="info-screenbox">
        <h2>Game Info</h2>
        <p><u>GPEP Mode:</u> Lose a life if you get it wrong or take longer than 10 seconds. 5 lives. 10 points for each correct answer.</p>
        <p><u>Fellow Mode:</u>Lose a life if you get it wrong or take longer than 6 seconds. 3 lives. Maximum 5 points for each correct answer, 1 point less for every extra second taken. Images are smaller with random blur factor, random amount of wax obstruction, and chance of wiggle</p>
        <h2>Credits</h2>
        <p>Coded by Dr Jeremy Steinberg 2024</p>
        <p>Inspired by now apparently unavailable game by Adam Handen from University of Pittsburgh School of Medicine</p>
        <p>Images are courtesy of <a href="https://www.pediatrics.wisc.edu/education/acute-otitis-media/exercises/images/">David P. McCormick</a></p>
        <button id="back-button">Back</button>
        </div>
    </div>

    <div id="dx-screen" class="dx-screen" style="display: none;">
        <div class="dx-screenbox">
        <h2>Diagnostic Criteria</h2><br>
        <h3><u>Diagnostic Criteria for AOM</u></h3>
        <ul>
            <li>Moderate to severe bulging of tympanic membrane</li>
            <li>New onset of otorrhea not new to acute otitis externa</li>
            <li>Mild bulging ( full) AND recent ( less than 48 hours-acute) onset of ear pain</li>
            <li>Mild bulging and intense erythema </li>     
        </ul>
        <br>
        <h3><u>Diagnostic Criteria for OME</u></h3>
        <p>Otitis Media with Effusion (OME) is the condition of fluid present in the middle ear. Inflammation may be associated with OME. The spectrum of tympanic membrane findings can be challenging for one to appreciate the subtle differences in the progression from MEE and OME to AOM</p>
        <p>Visualization of the tympanic membrane is critical to differentiate between AOM and OME. A middle ear effusion may be present after resolution of an episode of AOM, or it may develop because of a viral upper respiratory tract infection that produces eustachian tube dysfunction. In both of these settings, the middle ear effusion is not an infectious process and will not benefit from antibiotic therapy.</p>
        <p>Diagnostic criteria courtesy of <a href="https://www.pediatrics.wisc.edu/education/acute-otitis-media/exercises/images/">American Academy of Paediatrics 2013 Guidelines</a></p>
        <button id="back2-button">Back</button>
        </div>
    </div>

    <div id="game-container" style="display: none;">
        <div id="top-bar">
            <div class="container">
                <span id="lives">Lives: 
                    <img src="img/life.png" alt="Life" class="life-icon">
                    <img src="img/life.png" alt="Life" class="life-icon">
                    <img src="img/life.png" alt="Life" class="life-icon">
                    <img src="img/life.png" alt="Life" class="life-icon">
                    <img src="img/life.png" alt="Life" class="life-icon">
                </span>
                <span id="score">Score: 0</span>
            </div>
        </div>

        <div class="container">
            
            <div id="game-area">
                <div class="timer-container">
                    <div id="timer">Time: 30</div>
                    <button id="back3-button">X</button>
                </div>                
                <div id="image"></div>
                <div id="buttons">
                    <button class="game-button" onclick="checkAnswer('AOM')"><u>A</u>OM</button>
                    <button class="game-button" onclick="checkAnswer('OME')"><u>O</u>ME</button>
                    <button class="game-button" onclick="checkAnswer('No_Effusion')"><u>N</u>o Effusion</button>
                </div>
            </div>
            


        </div>

        <div id="cover" class="cover">
            <div>Loading...</div>
        </div>

        <div id="cover-win" class="cover" style="display: none;">
            <div>
                Ka Pai!<br>
                <img src="img/correct.png" alt="Correct">
            </div>
        </div>

        <div id="cover-lose" class="cover" style="display: none;">
            <div>
                <img src="img/incorrect.png" alt="Incorrect">
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>